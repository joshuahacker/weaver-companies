<!DOCTYPE html>
<html>
<head>
<link href="./DataTables/datatables.min.css" rel="stylesheet">
 
<script src="./DataTables/datatables.min.js"></script>

  <style>
    input[type="text"], 
    input[type="search"], textarea, button {
      outline: 1;
      box-shadow: 1 !important;
      border: 1px solid #767070 !important;
      font-size: 15px;
      border-radius: 5px !important;
    }
    body {
      border: 1 solid #767070;
      margin-left: 2px;
      margin-right: 2px;
    }
    p, pre {
      font-size: 10pt;
    }
    td, th {
      font-size: 10pt;
      border: 1px;
    }
    th {
      font-weight: bold;
    }

 #controlContainer {
      display: flex;
      justify-content: center; /* Center horizontally */
      flex-wrap: wrap; /* Allow wrapping as needed */
      margin-bottom: 1em; /* Add some spacing */
      gap: 20px; /* Space between search and length */
      padding: 5px;
    }
 .dataTables_wrapper .dataTables_paginate .paginate_button {
    transition: background-color .3s, border-color .3s;
}
.dataTables_wrapper .dataTables_paginate .paginate_button:hover {
    background-color: #f3f4f6; /* Tailwind gray-100 */
    border-color: #d1d5db; /* Tailwind gray-300 */
}
  </style>
</head>
<body>
<div id="controlContainer">
  <div id="customControlsContainer"></div>
  <div id ="pageEntries"></div>
</div>
    <table id="salesDataTable" class="table table-striped display striped">
        <thead class="dark">
      <tr>
        <th scope="col" class="px-6 py-3">Date</th>
        <th scope="col" class="px-6 py-3">Transaction ID</th>
        <th scope="col" class="px-6 py-3">Sale Amount</th>
        <th scope="col" class="px-6 py-3">Tax</th>
        <th scope="col" class="px-6 py-3">Total Revenue</th>
        <th scope="col" class="px-6 py-3">Discounts</th>
        <th scope="col" class="px-6 py-3">Net Revenue</th>
        <th scope="col" class="px-6 py-3">COGS</th>
        <th scope="col" class="px-6 py-3">COGS %</th>
        <th scope="col" class="px-6 py-3">Net Profit</th>
        <th scope="col" class="px-6 py-3">Net Profit %</th>
      </tr>
    </thead>
    <tbody>
      <!-- Table content -->
    </tbody>
    <tfoot>
  
      <tr>
        <th colspan="2">Totals:</th>
        <th ></th>
        <th></th> <!-- Placeholders for totals -->
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
      </tr>
    </tfoot>
  </table>
  <script>
    $(document).ready(function() {
      $("#salesDataTable").DataTable({ [
         'copy', 'excel', 'pdf'
         ],
          "columnDefs": [
            {
                "targets": 1, // Target the second column
                "render": function(data, type, row) {
                    return '<a href="www.netsuite.com' + encodeURIComponent(data) + '">' + data + '</a>';
                }}],
        "footerCallback": function(row, data, start, end, display) {
          var api = this.api();
          // Calculate Sale Amount Total
          var saleAmountTotal = api.column(2, {page: "current"}).data().reduce(function(a, b) { return parseFloat(a) + parseFloat(b); }, 0);
          // Calculate Tax Total
          var taxTotal = api.column(3, {page: "current"}).data().reduce(function(a, b) { return parseFloat(a) + parseFloat(b); }, 0);
          // Calculate Total Revenue
          var totalRevenue = api.column(4, {page: "current"}).data().reduce(function(a, b) { return parseFloat(a) + parseFloat(b); }, 0);
          // Calculate Discount Total
          var discountTotal = api.column(5, {page: "current"}).data().reduce(function(a, b) { return parseFloat(a) + parseFloat(b); }, 0);
          // Calculate Net Revenue
          var netRevenue = api.column(6, {page: "current"}).data().reduce(function(a, b) { return parseFloat(a) + parseFloat(b); }, 0);
          // Calculate COGS Total
          var cogsTotal = api.column(7, {page: "current"}).data().reduce(function(a, b) { return parseFloat(a) + parseFloat(b); }, 0);
          // Calculate Net Margin (Note: this may require custom calculation logic based on your data)
          var netMargin = netRevenue - cogsTotal;
          // Calculate Net Profit Percentage (Note: this calculation might need adjustment based on how you define net profit)
          var netProfitPercentage = (netRevenue > 0) ? ((netMargin / netRevenue) * 100) : 0;

          // Update the footer cells with the calculated totals
          $(api.column(2).footer()).html(saleAmountTotal.toFixed(2));
          $(api.column(3).footer()).html(taxTotal.toFixed(2));
          $(api.column(4).footer()).html(totalRevenue.toFixed(2));
          $(api.column(5).footer()).html(discountTotal.toFixed(2));
          $(api.column(6).footer()).html(netRevenue.toFixed(2));
          $(api.column(7).footer()).html(cogsTotal.toFixed(2));
          $(api.column(8).footer()).html(netMargin.toFixed(2));
          $(api.column(9).footer()).html(netProfitPercentage.toFixed(2) + "%");
        }
      });
       // Move the search box
    $('#customControlsContainer').append($('.dataTables_filter'));

    // Move the "Show [number] entries" dropdown
    $('#pageEntries').append($('.dataTables_length'));
    });
    table.buttons().container()
    .appendTo( $('.col-sm-6:eq(0)', table.table().container() ) );

  </script>
</body>

</html>
